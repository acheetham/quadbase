<%# Copyright (c) 2011 Rice University.  All rights reserved. %>

<% if @question.errors.empty? %>
   $("#preview_dialog").html("<%= escape_javascript(render :partial => "show", 
                                                   :locals => {:question => @question}) %>");
   <%= reload_mathjax("preview_dialog") %>

   $("#preview_dialog").dialog('open');
<% else %>
   // Submit the form so that the error messages display nicely with formatting
   // around the offending entries (use the trigger approach so we don't get
   // the 'are you sure you want to leave' error message)
   $("#save_button").trigger('click');
<% end %>
